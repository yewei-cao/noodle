define(["jquery","orderTimeUrls","common/validation","validationRules","isResponsive","bootstrap","jqueryVal","common/jquery.inlineError"],function(e,r,i,o,t){"use strict";function a(i,o){e.ajax({type:"POST",url:r.GetOrderTimes+"?storeId="+i+"&orderDate="+o,success:function(r){d(r.Times),e("#order_time_select").valid()}})}function d(r){var i=e("#order_time_select");i.empty(),e.each(r,function(r,o){var t=e("<option></option>").attr("value",o.Value).text(o.Text);i.append(t)})}function n(r,i){e(r).siblings(".inline-error").remove(),e(r).inlineError(i)}e("#order_date_select").change(function(){e("#order_date_select").valid(),a(e("#store_number").val(),e(this).val())});e("#order_form").validate({errorClass:"error",validClass:"validated",rules:{orderDate:{required:o.order_date.required},orderTime:{required:o.order_time.required}},highlight:function(r,i,o){e(r).parents(".field-container").addClass(i).removeClass(o)},unhighlight:function(r,i,o){e(r).parents(".field-container").addClass(o).removeClass(i)},errorPlacement:function(e,r){return!0}});return e("#order_time_select").change(function(){e("#order_time_select").valid()}),e("#start-order-button").click(function(){if(t===!0)0==e("#order_time_select").valid()&&n("#order_time_select",o.order_time.message),0==e("#order_date_select").valid()&&n("#order_date_select",o.order_date.message);else{var r=[];0==e("#order_time_select").valid()&&r.push(o.order_time.message),0==e("#order_date_select").valid()&&r.push(o.order_date.message),r.length>0&&i.showValidationDialog(r)}e(".lt-ie8").length>0&&e("#order_form").submit()}),e("#order_form").valid(),{init:function(){""!=r.ThuisbezorgdUrl&&(e("#thuisbezorg-dialog").modal({show:!0,backdrop:"static",keyboard:!0}),e("#thuisbezorg-dialog").on("shown shown.bs.modal",function(){e("#thuisbezorg-dialog").focus()}),e("#continue-link").click(function(){e("#thuisbezorg-dialog").modal("hide")}))}}});