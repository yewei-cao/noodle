{"version":3,"sources":["mymenu.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mymenu.js","sourcesContent":["/**\n * mymenu js\n */\n(function($) {\n\t\n\t$.extend({\n\t    StandardPost:function(url,args){\n\t        var form = $(\"<form method='post'><input type='hidden' name='_token' value='\"+$('meta[name=\"_token\"]').attr('content')+\"'></form>\"),\n\t            input;\n\t        form.attr({\"action\":url});\n\t        $.each(args,function(key,value){\n\t            input = $(\"<input type='hidden'>\");\n\t            input.attr({\"name\":key});\n\t            input.val(value);\n\t            form.append(input);\n\t        });\n\t        form.submit();\n\t    }\n\t});\n\n\t\n\t$(window).setBreakpoints({\n\t\tdistinct:!0,breakpoints:[0,414,768,992,1200,1480]\n\t});\n\n\t$(window).on({\"enterBreakpoint768 enterBreakpoint992 enterBreakpoint1200 enterBreakpoint1480\":function(){\n\t\t$(\"#basket-panel\").stick_in_parent({\n\t\t\tparent:\".main-container\",offset_top: 10,recalc_every:50\n\t\t});\n\t},\"enterBreakpoint0 enterBreakpoint414\":function(){\n\t\t$(\"#basket-panel\").trigger(\"sticky_kit:detach\")\n\t\t}\n\t});\n\n\n\t$('#open-basket, .mobile-close-button, .basket-shadow').on('click',function(e){\n\t\t$( \"#open-basket, .basket\" ).toggleClass( \"open\");\n// \t\t$( \".basket\" ).toggleClass( \"open\");\n\t\t$( \".container\" ).toggleClass( \"basket-open\");\n\t});\n\t\n\t$(document).on(\"click\", \"#apply_voucher\" , function() {\n\t\t\n\t\t$(\"#apply_voucher\").addClass('hide');\n\t\t$(\"#loading-indicator\").removeClass('loaded');\n\t\tvar code = $(\"#voucher_code\").val();\n//\t\t$.post('/home/menu/removetoorder',{id:code});\n \t\t$.ajax({\n \t\t\theaders: {  'X-CSRF-Token': $('meta[name=\"_token\"]').attr('content')},\n \t\t      url: '/home/menu/voucherapply',\n \t\t      type: 'POST',\n \t\t      data: {'code':code},\n \t\t      success: function(result) {\n \t\t    \t$(\"#apply_voucher\").removeClass('hide');\n \t\t\t\t$(\"#loading-indicator\").addClass('loaded');\n// \t\t\t\talert(result);\n \t\t\t\tif(!result.type){\n \t\t\t\t\tswal({   title: result.title,   \n \t\t\t\t\t\ttext: result.message,\n \t\t\t\t\t\ttype: \"error\",\n \t\t\t\t\t\tconfirmButtonText: 'Close'\n \t\t\t\t\t\t});\n \t\t\t\t}else{\n \t\t\t\t\tswal({\n\t\t\t\t\t\ttitle: result.title,\n\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\tshowCancelButton: true,\n\t\t\t\t\t\tcloseOnConfirm: false,\n\t\t\t\t\t\tshowLoaderOnConfirm: true,\n \t\t\t\t\t\t},\n \t\t\t\t\t\tfunction(){\n \t\t\t\t\t\t\t\n \t\t\t\t\t\t\t$.ajax({\n \t\t\t\t\t\t\t\t  headers: {  'X-CSRF-Token': $('meta[name=\"_token\"]').attr('content')},\n \t\t\t\t\t\t\t\t  url: '/home/menu/usevoucher',\n \t\t\t\t\t\t\t      type: 'POST',\n \t\t\t\t\t\t\t      data: {'code':code},\n \t\t\t\t\t\t\t      success: function(respon) {\n \t\t\t\t\t\t\t    \t if(!result.type){\n \t\t\t\t\t \t\t\t\t\tswal({   title: result.title,   \n \t\t\t\t\t \t\t\t\t\t\ttext: result.message,\n \t\t\t\t\t \t\t\t\t\t\ttype: \"error\",\n \t\t\t\t\t \t\t\t\t\t\tconfirmButtonText: 'Close'\n \t\t\t\t\t \t\t\t\t\t\t});\n \t\t\t\t\t\t\t    \t }else{\n \t\t\t\t\t\t\t    \t\t //run css somethings here\n \t\t\t\t\t\t\t    \t\t \n \t\t\t\t\t\t\t    \t }\n \t\t\t\t\t            },\n \t\t\t\t\t            error: function(respon) {\n \t\t\t\t\t                alert(\"Data not found\");\n \t\t\t\t\t            }\n \t\t\t\t\t\t\t });\n \t\t\t\t\t\t\t\n \t\t\t\t\t\t  setTimeout(function(){\n \t\t\t\t\t\t\t  \n \t\t\t\t\t\t\t swal({   title: \"Success\",   \n \t\t \t\t\t\t\t\ttext: \"Voucher worth $\"+ result.price +\" is used\" ,\n \t\t \t\t\t\t\t\ttype: \"success\",\n \t\t \t\t\t\t\t\tconfirmButtonText: 'Okay',\n \t\t \t\t\t\t\t\t});\n \t\t\t\t\t\t  }, 0);\n \t\t\t\t\t});\n \t\t\t\t\t\n \t\t\t\t}\n \t\t\t\t\n \t\t\t\t\n             },\n             error: function(result) {\n                 alert(\"Data not found\");\n             }\n \t\t      });\n\t});\n\t\n\t$(document).on(\"click\", \".add-to-basket\" , function() {\n\t\tvar code = $(this).attr(\"item-code\");\n\t\t$.ajax({\n\t\t\t  headers: {  'X-CSRF-Token': $('meta[name=\"_token\"]').attr('content')},\n\t\t      url: '/home/menu/addtoorder',\n\t\t      type: 'POST',\n\t\t      data: {'id':code},\n\t\t      success: function(result) {\n\t\t\t\t  add_basket(result);\n            },\n            error: function(result) {\n                alert(\"Data not found\");\n            }\n\t\t });\n\t\t\n\t});\n\n\t$(document).on(\"click\", \".remove-to-basket\" , function() {\n\t\tvar code = $(this).attr(\"item-code\");\n//\t\t$.post('/home/menu/removetoorder',{id:code});\n \t\t$.ajax({\n \t\t\theaders: {  'X-CSRF-Token': $('meta[name=\"_token\"]').attr('content')},\n \t\t      url: '/home/menu/removetoorder',\n \t\t      type: 'POST',\n \t\t      data: {'id':code},\n \t\t      success: function(result) {\n \t\t\t\t  add_basket(result);\n             },\n             error: function(result) {\n                 alert(\"Data not found\");\n             }\n \t\t      });\n\t});\n\t\n\t$(document).on(\"click\", \".material_rm\" , function() {\n\t\tvar code = $(this).attr(\"item-code\");\n\t\tvar takeout = $(\"*[name='takeout']\").val();\n\t\tif($(this).hasClass('choicebtn')){\n\t\t\ttakeout = takeout +code+ ',';\n\t\t\t$(\"*[name='takeout']\").val(takeout);\n\t\t\t$(this).removeClass('choicebtn');\n\t\t\t$(this).addClass('unchoicebtn');\n\t\t}else{\n\t\t\ttakeout = takeout.replace(code+',','');\n\t\t\t$(\"*[name='takeout']\").val(takeout);\n\t\t\t$(this).removeClass('unchoicebtn');\n\t\t\t$(this).addClass('choicebtn');\n\t\t}\n\t});\n\n\t$(document).on(\"click\", \".material_ad\" , function() {\n\t\tvar code = $(this).attr(\"item-code\");\n\t\tvar extra = $(\"*[name='extra']\").val();\n\t\tif($(this).hasClass('unchoicebtn')){\n\t\t\textra = extra +code+ ',';\n\t\t\t$(\"*[name='extra']\").val(extra);\n\t\t\tvar price = parseFloat($(\"#dish_price\").html()) + parseFloat($(this).attr(\"price\"));\n\t\t\t$(\"#dish_price\").html(price);\n\t\t\t$(this).removeClass('unchoicebtn');\n\t\t\t$(this).addClass('choicebtn');\n\t\t}else{\n\t\t\textra = extra.replace(code+',','');\n\t\t\t$(\"*[name='extra']\").val(extra);\n\t\t\tvar price = parseFloat($(\"#dish_price\").html()) - parseFloat($(this).attr(\"price\"));\n\t\t\t$(\"#dish_price\").html(price);\n\t\t\t$(this).removeClass('choicebtn');\n\t\t\t$(this).addClass('unchoicebtn');\n\t\t}\n\t\t\t\n\t});\n\t\n\t//plugin bootstrap minus and plus\n\t//http://jsfiddle.net/laelitenetwork/puJ6G/\n\t$('.btn-number').click(function(e){\n\t  e.preventDefault();\n\t  \n\t  fieldName = $(this).attr('data-field');\n\t  type      = $(this).attr('data-type');\n\t  var input = $(\"input[name='\"+fieldName+\"']\");\n\t  var currentVal = parseInt(input.val());\n\t  if (!isNaN(currentVal)) {\n\t      if(type == 'minus') {\n\t          \n\t          if(currentVal > input.attr('min')) {\n\t              input.val(currentVal - 1).change();\n\t          } \n\t          if(parseInt(input.val()) == input.attr('min')) {\n\t              $(this).attr('disabled', true);\n\t          }\n\n\t      } else if(type == 'plus') {\n\n\t          if(currentVal < input.attr('max')) {\n\t              input.val(currentVal + 1).change();\n\t          }\n\t          if(parseInt(input.val()) == input.attr('max')) {\n\t              $(this).attr('disabled', true);\n\t          }\n\n\t      }\n\t  } else {\n\t      input.val(0);\n\t  }\n\t});\n\t$('.input-number').focusin(function(){\n\t $(this).data('oldValue', $(this).val());\n\t});\n\t$('.input-number').change(function() {\n\t  \n\t  minValue =  parseInt($(this).attr('min'));\n\t  maxValue =  parseInt($(this).attr('max'));\n\t  valueCurrent = parseInt($(this).val());\n\t  \n\t  name = $(this).attr('name');\n\t  if(valueCurrent >= minValue) {\n\t      $(\".btn-number[data-type='minus'][data-field='\"+name+\"']\").removeAttr('disabled')\n\t  } else {\n\t      alert('Sorry, the minimum value was reached');\n\t      $(this).val($(this).data('oldValue'));\n\t  }\n\t  if(valueCurrent <= maxValue) {\n\t      $(\".btn-number[data-type='plus'][data-field='\"+name+\"']\").removeAttr('disabled')\n\t  } else {\n\t      alert('Sorry, the maximum value was reached');\n\t      $(this).val($(this).data('oldValue'));\n\t  }\n\t  \n\t});\n\t$(\".input-number\").keydown(function (e) {\n\t      // Allow: backspace, delete, tab, escape, enter and .\n\t      if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||\n\t           // Allow: Ctrl+A\n\t          (e.keyCode == 65 && e.ctrlKey === true) || \n\t           // Allow: home, end, left, right\n\t          (e.keyCode >= 35 && e.keyCode <= 39)) {\n\t               // let it happen, don't do anything\n\t               return;\n\t      }\n\t      // Ensure that it is a number and stop the keypress\n\t      if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {\n\t          e.preventDefault();\n\t      }\n\t  });\n\n\tadd_basket=function(result){\n\t\t\n\t\t var html= \"\";\n\t\t var totalqty=0;\n\n\t\t if(Object.keys(result).length == 1){\n\t\t\t $(\".empty-order\").show();\n\t\t }\n\t\t else{\n\t\t\t $(\".empty-order\").hide();\n\t\t\t  for(var i in result){\n\t\t\t\t  if(i != \"total\"&& i != 'deliveryfee'){\n\t\t\t\t  totalqty+=result[i]['qty'];\n\t\t\t\t  html += '<div class=\\\"basket-product product\\\"> '\n\t\t                \n\t\t                +' <div class=\\\"row\\\">'\n\t\t                +'    <div class=\\\"col-9\\\">'\n\t\t                +'      <span class=\\\"description\\\">'\n\t\t                + result[i]['qty'] +' x '+ result[i]['name']\n\t\t                +'      </span>'\n\t\t                +'    </div>'\n\t\t                +'       <div class=\"col-3\"><span class=\"price at-product-price\">$'+ result[i]['price'] +'</span></div>'\n\t\t                +' </div>';\n\t\t                \n\t\t\t\t if(!$.isEmptyObject(result[i]['flavour'])){\n\t\t\t\t\t\t html +=' <div class=\\\"row\\\">'\n\t\t\t                +'    <div class=\\\"col-9\\\">'\n\t\t\t                +'      <span class=\\\"description\\\">'\n\t\t\t                +'&nbsp;&nbsp;&nbsp;&nbsp;'+result[i]['flavour']\n\t\t\t                +'      </span>'\n\t\t\t                +'    </div>'\n\t\t\t                +' </div>';\n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t if(!$.isEmptyObject(result[i]['takeout'])){\n\t\t\t\t\t for(var j in result[i]['takeout']){\n\t\t\t\t\t\t \n\t\t\t\t\t\t html +=' <div class=\\\"row\\\">'\n\t\t\t                +'    <div class=\\\"col-9\\\">'\n\t\t\t                +'      <span class=\\\"description\\\">'\n\t\t\t                +'&nbsp;&nbsp;&nbsp;&nbsp;no '+result[i]['takeout'][j]['name']\n\t\t\t                +'      </span>'\n\t\t\t                +'    </div>'\n\t\t\t                +' </div>';\n\t\t\t\t\t }\n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t if(!$.isEmptyObject(result[i]['extra'])){\n\t\t\t\t\t for(var k in result[i]['extra']){\n\t\t\t\t\t\t \n\t\t\t\t\t\t html +=' <div class=\\\"row\\\">'\n\t\t\t                +'    <div class=\\\"col-9\\\">'\n\t\t\t                +'      <span class=\\\"description\\\">'\n\t\t\t                +'&nbsp;&nbsp;&nbsp;&nbsp;extra '+result[i]['extra'][k]['name']+' $'+result[i]['extra'][k]['price']\n\t\t\t                +'      </span>'\n\t\t\t                +'    </div>'\n\t\t\t                +' </div>';\n\t\t\t\t\t }\n\t\t\t\t }\n\t\t                \n\t\t\t\t  html +='   <div class=\"row actions\">'\n\t\t                +'       <button class=\"btn add-product add-to-basket\" item-code=\"'+ result[i]['__raw_id'] +'\">Add one</button>'\n\t\t                +'           <button class=\"btn remove-product remove-to-basket\" item-code=\"'+ result[i]['__raw_id'] +'\">Remove</button>'\n\t\t                +'  </div> '\n\t\t                +' </div>';\n\t\t\t  }\n\t\t\t  }\n\t\t }\n\t\t \n\t\t $('.at-product-price').text('$'+ result['deliveryfee']);\n//\t\t if(result['deliveryfee'] == 0){\n//\t\t\t $(\".deliveryfee-container\").hide();\n//\t\t }else{\n//\t\t\t $(\".deliveryfee-container\").show();\n//\t\t}\n\t\t var total = result['total'] +result['deliveryfee'];\n\t\t  $('.total-amount').text('$'+total);\n\t\t  $('.number-of-items').text(totalqty);\n\t\t  $(\".basket_order\").html(html);\n\t}\n\n}(jQuery));\n"]}